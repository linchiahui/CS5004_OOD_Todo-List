<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Option.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">hw9</a> &gt; <a href="index.source.html" class="el_package">toDoApplication.view</a> &gt; <span class="el_source">Option.java</span></div><h1>Option.java</h1><pre class="source lang-java linenums">package toDoApplication.view;

import java.util.ArrayList;
import java.util.List;
import java.util.Objects;

/**
 * This class represents an Option object.
 */
public class Option {

  /**
   * Constant indicating that the given Option does not require arguments following it
   */
  public static final int UNINITIALIZED = -1;

  /**
   * Constant indicating that the given Option can have arguments following it
   */
  public static final int UNLIMITED_VALUES = Integer.MAX_VALUE;

  /** The long String representation of the Option */
  private String longOpt;

  /** The name of the argument for this Option */
  private String argName;

  /** Description of the Option */
  private String description;

  /** Specifies whether this option is required to run the program*/
  private boolean required;

  /** The number of arguments this Option can have */
  private int numberOfArgs;

  /** The list of argument values **/
<span class="fc" id="L38">  private List&lt;String&gt; values = new ArrayList&lt;&gt;();</span>


  /**
   * Constructs a new Option object. Each of its instance variables is built by a Builder.
   *
   * @param builder The Builder object to built the Option's instance variables
   */
<span class="fc" id="L46">  public Option(Builder builder) {</span>
<span class="fc" id="L47">    this.argName = builder.argName;</span>
<span class="fc" id="L48">    this.description = builder.description;</span>
<span class="fc" id="L49">    this.longOpt = builder.longOpt;</span>
<span class="fc" id="L50">    this.numberOfArgs = builder.numberOfArgs;</span>
<span class="fc" id="L51">    this.required = builder.required;</span>
<span class="fc" id="L52">  }</span>

  /**
   * Gets long opt of the Option.
   *
   * @return the long opt of the Option.
   */
  public String getLongOpt() {
<span class="fc" id="L60">    return this.longOpt;</span>
  }

  /**
   * Gets arg name of the Option.
   *
   * @return the arg name of the Option.
   */
  public String getArgName() {
<span class="fc" id="L69">    return this.argName;</span>
  }

  /**
   * Whether this Option requires at least one argument
   *
   * @return true if this Option requires at least one argument, false if it doesn't require any
   * arguments.
   */
  public boolean hasArg()
  {
<span class="fc bfc" id="L80" title="All 2 branches covered.">    return this.numberOfArgs &gt; 0;</span>
  }

  /**
   * Whether this Option can take more than one arguments.
   *
   * @return true if this Option can take more than one argument, false otherwise.
   */
  public boolean hasArgs()
  {
<span class="fc bfc" id="L90" title="All 2 branches covered.">    return this.numberOfArgs == UNLIMITED_VALUES;</span>
  }

  /**
   * Gets description of the Option.
   *
   * @return the description of the Option.
   */
  public String getDescription() {
<span class="fc" id="L99">    return this.description;</span>
  }

  /**
   * Whether this Option is required to run the program.
   *
   * @return true if the Option is required to run the program, false otherwise.
   */
  public boolean isRequired() {
<span class="fc" id="L108">    return this.required;</span>
  }

  /**
   * Gets the number of args following this Option.
   *
   * @return the number of args following this Option.
   */
  public int getNumberOfArgs() {
<span class="fc" id="L117">    return this.numberOfArgs;</span>
  }

  /**
   * Adds a specified argument value to this Option.
   *
   * @param value is a/the argument value for this Option
   * @throws ParserException if arguments were given to Options that do not require arguments
   */
  public void addValueForProcessing(String value) throws ParserException {
<span class="fc bfc" id="L127" title="All 2 branches covered.">    if (this.numberOfArgs == UNINITIALIZED) {</span>
<span class="fc" id="L128">      throw new ParserException(&quot;ERROR: arguments were provided for incorrect command(s)&quot;);</span>
    }
<span class="fc" id="L130">    this.processValue(value);</span>
<span class="fc" id="L131">  }</span>

  /**
   * Processes the argument value.  If this Option has a argument value separator, the argument
   * value will have to be parsed into individual tokens.  When n-1 tokens have been processed and
   * there are more value separators in the argument value, parsing is ceased and the remaining
   * characters are added as a single token.
   *
   * @param value The argument value to be processed.
   * @throws ParserException if the Option cannot accept more arguments.
   */
  public void processValue(String value) throws ParserException {
<span class="fc bfc" id="L143" title="All 2 branches covered.">    if (!this.acceptsArg()) {</span>
<span class="fc" id="L144">      throw new ParserException(&quot;Incorrect number of argument value(s) provided to Option(s)&quot;);</span>
    }
    // Stores argument value into the Option's args list.
<span class="fc" id="L147">    this.values.add(value);</span>
<span class="fc" id="L148">  }</span>

  /**
   * Whether the Option can accept more arguments.
   *
   * @return true if the Option can accept more arguments, false if the maximum number of arguments
   * is reached.
   */
  protected boolean acceptsArg() {
<span class="pc bpc" id="L157" title="2 of 6 branches missed.">    return (this.hasArg()) &amp;&amp; (this.numberOfArgs &lt;= 0 || this.values.size() &lt; this.numberOfArgs);</span>
  }

  /**
   * Whether the Option requires more arguments to be valid.
   *
   * @return true if the Option needs more arguments to become valid, false otherwise.
   */
  protected boolean requiresArg()
  {
<span class="nc" id="L167">    return this.acceptsArg();</span>
  }

  /**
   * Gets the arguments values of a given Option.
   *
   * @return the arguments of this Option as a List, or null if this Option requires no arguments.
   */
  public List&lt;String&gt; getValuesList(){
<span class="fc bfc" id="L176" title="All 2 branches covered.">    if(this.values.isEmpty()) return null;</span>
<span class="fc" id="L177">    return this.values;</span>
  }

  /**
   * Returns whether this Option has any arguments at all.
   *
   * @return true if this Option has argument(s), false otherwise.
   */
  private boolean hasNoValues()
  {
<span class="fc" id="L187">    return this.values.isEmpty();</span>
  }

  /**
   * Returns the argument following this Option
   *
   * @return the argument following the Option, or null if there is no value.
   */
  public String getValue()
  {
<span class="fc bfc" id="L197" title="All 2 branches covered.">    return this.hasNoValues() ? null : this.values.get(0);</span>
  }

  @Override
  public boolean equals(Object o) {
<span class="fc bfc" id="L202" title="All 2 branches covered.">    if (this == o) {</span>
<span class="fc" id="L203">      return true;</span>
    }
<span class="fc bfc" id="L205" title="All 2 branches covered.">    if (!(o instanceof Option)) {</span>
<span class="fc" id="L206">      return false;</span>
    }
<span class="fc" id="L208">    Option option = (Option) o;</span>
<span class="fc bfc" id="L209" title="All 2 branches covered.">    return isRequired() == option.isRequired() &amp;&amp;</span>
<span class="fc bfc" id="L210" title="All 2 branches covered.">        getNumberOfArgs() == option.getNumberOfArgs() &amp;&amp;</span>
<span class="fc bfc" id="L211" title="All 2 branches covered.">        Objects.equals(getLongOpt(), option.getLongOpt()) &amp;&amp;</span>
<span class="pc bpc" id="L212" title="1 of 2 branches missed.">        Objects.equals(getArgName(), option.getArgName()) &amp;&amp;</span>
<span class="pc bpc" id="L213" title="1 of 2 branches missed.">        Objects.equals(getDescription(), option.getDescription());</span>
  }

  @Override
  public int hashCode() {
<span class="fc" id="L218">    return Objects.hash(getLongOpt(), getArgName(), getDescription(), isRequired(),</span>
<span class="fc" id="L219">        getNumberOfArgs());</span>
  }
  @Override
  public String toString() {
<span class="fc" id="L223">    return &quot;Option{&quot; +</span>
        &quot;longOpt='&quot; + longOpt + '\'' +
        &quot;, argName='&quot; + argName + '\'' +
        &quot;, description='&quot; + description + '\'' +
        &quot;, required=&quot; + required +
        &quot;, numberOfArgs=&quot; + numberOfArgs +
        '}';
  }

  /**
   * A nested builder class that creates Option instances using builder pattern.
   */
  public static class Builder {
    /** Description of the Option */
    private String description;

    /** The long name representation of the Option */
    private String longOpt;

    /** The name of the argument for this Option */
    private String argName;

    /** Specifies whether this option is required to be present */
    private boolean required;

    /** The number of argument values this option can have; assuming it can have none at the
     * beginning.*/
<span class="fc" id="L250">    private int numberOfArgs = UNINITIALIZED;</span>

    /**
     * Constructs a new Builder object with the minimum required parameters for an Option instance.
     * Overloaded constructor: can instantiate a Builder either by no parameters, or the long name
     * of the Option.
     *
     * @throws IllegalArgumentException if there are any non valid Option characters
     */
    public Builder() {
<span class="fc" id="L260">      this(null);</span>
<span class="fc" id="L261">    }</span>

    /**
     * Instantiates a new Builder object.
     * Overloaded constructor: can instantiate a Builder either by no parameters, or the long name
     * of the Option.
     *
     * @param longOpt the long name of the Option
     * @throws IllegalArgumentException if the long name is judged to be invalid
     */
<span class="fc" id="L271">    public Builder(String longOpt) throws IllegalArgumentException {</span>
<span class="fc" id="L272">      OptionValidator.validateOption(longOpt);</span>
<span class="fc" id="L273">      this.longOpt = longOpt;</span>
<span class="fc" id="L274">    }</span>

    /**
     * Sets the display name for the argument value.
     *
     * @param argName the display name for the argument value.
     * @return this builder, to allow method chaining
     */
    public Builder argName(String argName) {
<span class="fc" id="L283">      this.argName = argName;</span>
<span class="fc" id="L284">      return this;</span>
    }

    /**
     * Sets the description for this Option.
     *
     * @param description the description of the Option.
     * @return this builder, to allow method chaining
     */
    public Builder desc(String description) {
<span class="fc" id="L294">      this.description = description;</span>
<span class="fc" id="L295">      return this;</span>
    }

    /**
     * Sets the long name of the Option.
     *
     * @param longOpt the long name of the Option
     * @return this builder, to allow method chaining
     */
    public Builder longOpt(final String longOpt) {
<span class="fc" id="L305">      this.longOpt = longOpt;</span>
<span class="fc" id="L306">      return this;</span>
    }

    /**
     * Overloaded method; if the user calls required() with no parameters, the corresponding
     * required instance is set to true.
     *
     * @return this builder, to allow method chaining
     */
    public Builder required()
    {
<span class="fc" id="L317">      return this.required(true);</span>
    }

    /**
     * Overloaded method; if the user calls required() with true or false specified, the the
     * corresponding required instance variable is updated.
     *
     * @param required specifies whether the Option is mandatory
     * @return this builder, to allow method chaining
     */
    public Builder required(boolean required) {
<span class="fc" id="L328">      this.required = required;</span>
<span class="fc" id="L329">      return this;</span>
    }

    /**
     * Indicates that the Option will require an argument.
     * Overloaded method; if the user calls hasArgs() with no parameters, the corresponding
     * &quot;hasArg&quot; instance is set to true.
     *
     * @return this builder, to allow method chaining
     */
    public Builder hasArg()
    {
<span class="fc" id="L341">      return this.hasArg(true);</span>
    }

    /**
     * Indicates if the Option has an argument or not.
     * Overloaded method; if the user calls hasArgs() with true or false specified, the
     * corresponding &quot;hasArg&quot; instance is set to accordingly.
     *
     * @param hasArg specifies whether the Option takes an argument or not
     * @return this builder, to allow method chaining
     */
    public Builder hasArg(boolean hasArg)
    {
      // Set to UNINITIALIZED when no arg is specified to be compatible with OptionBuilder
<span class="fc bfc" id="L355" title="All 2 branches covered.">      this.numberOfArgs = hasArg ? 1 : Option.UNINITIALIZED;</span>
<span class="fc" id="L356">      return this;</span>
    }

    /**
     * Indicates that the Option can have unlimited argument values.
     *
     * @return this builder, to allow method chaining
     */
    public Builder hasArgs() {
<span class="fc" id="L365">      this.numberOfArgs = Option.UNLIMITED_VALUES;</span>
<span class="fc" id="L366">      return this;</span>
    }

    /**
     * Constructs an Option with the values declared by this Builder.
     *
     * @return the new Option object.
     * @throws IllegalArgumentException if neither opt or longOpt has been set
     */
    public Option build() {
<span class="fc bfc" id="L376" title="All 2 branches covered.">      if (this.longOpt == null) {</span>
<span class="fc" id="L377">        throw new IllegalArgumentException(&quot;Either opt or longOpt must be specified&quot;);</span>
      }
<span class="fc" id="L379">      return new Option(this);</span>
    }
  }
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>